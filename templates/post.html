{% extends "base.html" %}

{% block content %}

<div class="row">
  <div class="col-sm-1"></div>
  <div class="list-group col-sm-10">
    <form class="" action="/like/{{p.key().id()}}" method="post">
      <a href="/edit/{{ p.key().id() }}" class="btn btn-primary">Edit Post</a>
      <input type="submit" class="btn btn-info" value="{{like_btn}}">
    </form>

    {% if error %}
    <div class="alert alert-danger" role="alert">{{error}}</div>
    {% endif %}
  </div>
</div>

<div class="row">
  <div class="col-sm-1"></div>
  <div class="post col-sm-10">
    <div class="post-heading">
      <div class="post-title">
        <h2>
          {{p.subject}}
          <small>{{p.created.strftime("%b %d, %Y")}}</small>
        </h2>
      </div>
    </div>

    <div class="post-content">
      {{p._render_text() | safe}}
      <hr>
      <b>{{like_ct}} Likes</b>
      <hr>
      <form  method="post" action="/comment/{{ p.key().id() }}">
        <textarea rows="5" class="col-sm-12" name="content"></textarea>
        <input type="submit" class="btn btn-primary" value="Add Comment">
      </form>
      <hr>
      {% if comments[0] %}
      {% for c in comments %}

        <div>
          <p>
            {{c._render_text() | safe}}
          </p>
          <a href="/comment/{{ p.key().id() }}/edit/{{c.key().id()}}" class="btn btn-sm btn-default">Edit</a>

        </div>
        <hr>
      {% endfor %}
      {% endif %}
    </div>

  </div>
</div>


{% endblock %}
